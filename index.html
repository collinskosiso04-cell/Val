<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Important Question üëÄ</title>

  <style>
    :root { --btnW: 160px; --btnH: 54px; }

    body{
      height:100vh; margin:0; overflow:hidden;
      background: radial-gradient(circle at top, #ffd1dc, #ff7aa2, #ff4d6d);
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      font-family: Arial, system-ui, -apple-system, sans-serif;
      text-align:center; color:#1a1a1a;
      padding: 16px;
    }

    .card{
      width:min(760px, 94vw);
      background: rgba(255,255,255,0.25);
      border: 1px solid rgba(255,255,255,0.35);
      box-shadow: 0 16px 50px rgba(0,0,0,0.18);
      backdrop-filter: blur(10px);
      border-radius: 18px;
      padding: 22px 18px 26px;
    }

    h1{
      margin: 6px 0 8px;
      font-size: clamp(28px, 5vw, 46px);
    }

    .sub{
      font-size: clamp(14px, 2.4vw, 18px);
      opacity: 0.95;
      margin: 0 0 10px;
      font-weight: 600;
    }

    .countdown{
      display:inline-block;
      padding:10px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,0.35);
      border: 1px solid rgba(255,255,255,0.45);
      font-weight: 800;
      margin: 10px 0 14px;
      font-size: clamp(13px, 2.4vw, 16px);
    }

    .controls{
      display:flex; gap:10px; flex-wrap:wrap; justify-content:center;
      margin: 8px 0 12px;
    }

    .chip{
      font-size: 14px;
      padding: 10px 14px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: rgba(255,255,255,0.55);
      box-shadow: 0 8px 20px rgba(0,0,0,0.14);
    }
    .chip:active{ transform: scale(0.98); }

    /* Slideshow */
    .slideshow {
      width: min(520px, 92vw);
      aspect-ratio: 4 / 5;
      border-radius: 18px;
      overflow: hidden;
      margin: 10px auto 14px;
      border: 1px solid rgba(255,255,255,0.45);
      box-shadow: 0 14px 34px rgba(0,0,0,0.22);
      position: relative;
      background: rgba(255,255,255,0.2);
    }

    .slideshow img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 0.9s ease;
    }

    .slideshow img.active {
      opacity: 1;
    }

    .btnRow{
      display:flex; gap: 14px; justify-content:center; align-items:center;
      margin-top: 4px;
      flex-wrap: wrap;
      position: relative;
      min-height: 90px;
    }

    button.big{
      width: var(--btnW);
      height: var(--btnH);
      font-size: 18px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 12px 26px rgba(0,0,0,0.22);
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      font-weight: 800;
    }

    #yes{
      background: #ffffff;
      color: #ff2d55;
      position: static;
    }

    #no{
      background: #111;
      color: white;
      position: fixed; /* we‚Äôll move it anywhere */
      left: 50%;
      top: 78%;
      transform: translate(-50%, -50%);
    }

    .msg{
      margin-top: 12px;
      font-size: clamp(14px, 2.4vw, 18px);
      min-height: 26px;
      font-weight: 800;
      color: rgba(0,0,0,0.75);
    }

    .footer{
      margin-top: 10px;
      font-size: 12px;
      opacity: 0.85;
      font-weight: 600;
    }

    canvas#confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 10;
    }

    /* Success screen */
    .success{
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      height:100vh; width:100vw;
      text-align:center;
      color:#1a1a1a;
      padding: 18px;
    }

    .heart {
      font-size: clamp(90px, 14vw, 160px);
      margin-bottom: 10px;
      animation: pulse 1s ease-in-out infinite;
    }

    @keyframes pulse {
      0%   { transform: scale(1); }
      50%  { transform: scale(1.15); }
      100% { transform: scale(1); }
    }

    .success h2{
      font-size: clamp(30px, 6vw, 54px);
      margin: 8px 0 10px;
      letter-spacing: 1px;
      font-weight: 900;
    }

    .success .val{
      font-size: clamp(20px, 4vw, 30px);
      margin: 0 0 6px;
      font-weight: 900;
      letter-spacing: 0.5px;
    }

    .success .love{
      font-size: clamp(18px, 3.6vw, 26px);
      margin: 0;
      font-weight: 900;
      letter-spacing: 0.5px;
    }
  </style>
</head>

<body>
  <canvas id="confetti"></canvas>

  <div class="card" id="mainCard">
    <h1>Will you be my Valentine? üíò</h1>
    <p class="sub">I made this just for you üòå</p>

    <div class="countdown" id="countdown">Loading countdown‚Ä¶</div>

    <!-- 6-pic slideshow -->
    <div class="slideshow" aria-label="Photo slideshow">
      <img src="pic1.jpg" class="active" alt="Photo 1" />
      <img src="pic2.jpg" alt="Photo 2" />
      <img src="pic3.jpg" alt="Photo 3" />
      <img src="pic4.jpg" alt="Photo 4" />
      <img src="pic5.jpg" alt="Photo 5" />
      <img src="pic6.jpg" alt="Photo 6" />
    </div>

    <div class="controls">
      <button class="chip" id="musicBtn">‚ñ∂Ô∏è Play music</button>
      <button class="chip" id="resetBtn">üîÅ Reset buttons</button>
    </div>

    <div class="btnRow">
      <button class="big" id="yes">Yes üòç</button>
      <button class="big" id="no">No üôÉ</button>
    </div>

    <div class="msg" id="msg"></div>
    <div class="footer">Tip: If ‚ÄúNo‚Äù is hard to click‚Ä¶ that‚Äôs the point üòà</div>
  </div>

  <!-- Music (must be a file you upload as music.mp3) -->
  <audio id="bgm" loop></audio>

  <script>
    // -------------------------------
    // Countdown to Valentine's Day 2026
    // -------------------------------
    const countdownEl = document.getElementById("countdown");
    function updateCountdown(){
      const target = new Date("2026-02-14T00:00:00"); // local time
      const now = new Date();
      const diff = target - now;

      if(diff <= 0){
        countdownEl.textContent = "It‚Äôs Valentine‚Äôs Day üò≠‚ù§Ô∏è";
        return;
      }
      const totalSeconds = Math.floor(diff / 1000);
      const days = Math.floor(totalSeconds / 86400);
      const hours = Math.floor((totalSeconds % 86400) / 3600);
      const mins = Math.floor((totalSeconds % 3600) / 60);
      const secs = totalSeconds % 60;

      countdownEl.textContent = `Countdown: ${days}d ${hours}h ${mins}m ${secs}s until Feb 14, 2026 üíù`;
    }
    updateCountdown();
    setInterval(updateCountdown, 1000);

    // -------------------------------
    // Slideshow (6 photos auto-rotate)
    // -------------------------------
    let slideIndex = 0;
    function startSlideshow() {
      const slides = document.querySelectorAll(".slideshow img");
      if (!slides.length) return;

      setInterval(() => {
        slides[slideIndex].classList.remove("active");
        slideIndex = (slideIndex + 1) % slides.length;
        slides[slideIndex].classList.add("active");
      }, 2600); // change every 2.6 seconds
    }
    document.addEventListener("DOMContentLoaded", startSlideshow);

    // -------------------------------
    // ‚ÄúNo‚Äù button runs away + taunts
    // -------------------------------
    const noBtn = document.getElementById("no");
    const msgEl = document.getElementById("msg");
    const resetBtn = document.getElementById("resetBtn");

    const taunts = [
      "Be serious üò≠",
      "Nice try üòå",
      "Why are you chasing ‚ÄòNo‚Äô? üòÇ",
      "No is not available today üòà",
      "Try again‚Ä¶ wrong choice üíÄ",
      "You‚Äôre making this hard for yourself üò≠‚ù§Ô∏è",
      "Just press YES üòå",
      "I know you want to üòè",
      "Oops‚Äîmissed it üò≠",
      "This button is on vacation üèùÔ∏è"
    ];

    function randomTaunt(){
      msgEl.textContent = taunts[Math.floor(Math.random() * taunts.length)];
    }

    function moveNoButton(){
      const padding = 12;
      const bw = noBtn.offsetWidth || 160;
      const bh = noBtn.offsetHeight || 54;

      const maxX = window.innerWidth - bw - padding;
      const maxY = window.innerHeight - bh - padding;

      const x = Math.max(padding, Math.floor(Math.random() * maxX));
      const y = Math.max(padding, Math.floor(Math.random() * maxY));

      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
      noBtn.style.transform = "none";
      randomTaunt();
    }

    noBtn.addEventListener("mouseover", moveNoButton);

    noBtn.addEventListener("touchstart", (e) => {
      e.preventDefault();
      moveNoButton();
    }, { passive: false });

    noBtn.addEventListener("click", (e) => {
      e.preventDefault();
      msgEl.textContent = "Nice try‚Ä¶ but still no üò≠";
      moveNoButton();
    });

    resetBtn.addEventListener("click", () => {
      msgEl.textContent = "";
      noBtn.style.left = "50%";
      noBtn.style.top = "78%";
      noBtn.style.transform = "translate(-50%, -50%)";
    });

    setTimeout(moveNoButton, 450);

    // -------------------------------
    // Confetti (canvas)
    // -------------------------------
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    let W, H;

    function resize(){
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    let confetti = [];

    function makeConfettiBurst(){
      confetti = [];
      const count = 240;
      for(let i=0;i<count;i++){
        confetti.push({
          x: Math.random() * W,
          y: -20 - Math.random() * H * 0.2,
          vx: (Math.random() - 0.5) * 6,
          vy: 3 + Math.random() * 6,
          size: 4 + Math.random() * 9,
          rot: Math.random() * Math.PI,
          vr: (Math.random() - 0.5) * 0.22,
          life: 190 + Math.random() * 120
        });
      }
    }

    function drawConfetti(){
      ctx.clearRect(0,0,W,H);
      confetti.forEach(p => {
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.fillStyle = `hsl(${(p.x + p.y) % 360}, 90%, 60%)`;
        ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.7);
        ctx.restore();
      });
    }

    function stepConfetti(){
      confetti.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;
        p.vy += 0.02; // gravity
        p.life -= 1;
      });
      confetti = confetti.filter(p => p.life > 0 && p.y < H + 60);
      drawConfetti();
      if(confetti.length > 0) requestAnimationFrame(stepConfetti);
    }

    // -------------------------------
    // Music (tap to play on iPhone)
    // -------------------------------
    const musicBtn = document.getElementById("musicBtn");
    const bgm = document.getElementById("bgm");
    let musicOn = false;

    // Uses the file you upload: music.mp3
    bgm.src = "music.mp3";
    bgm.volume = 0.35;

    musicBtn.addEventListener("click", async () => {
      try{
        if(!musicOn){
          await bgm.play();
          musicOn = true;
          musicBtn.textContent = "‚è∏ Pause music";
        } else {
          bgm.pause();
          musicOn = false;
          musicBtn.textContent = "‚ñ∂Ô∏è Play music";
        }
      } catch(err){
        alert("Music couldn‚Äôt play. Make sure music.mp3 is uploaded in the repo and try tapping again.");
      }
    });

    // -------------------------------
    // YES button = confetti + new success screen (ALL CAPS)
    // -------------------------------
    const yesBtn = document.getElementById("yes");
    yesBtn.addEventListener("click", () => {
      makeConfettiBurst();
      stepConfetti();

      // Optional: if music isn't playing yet, try to start it after click
      // (still requires user interaction; this click counts)
      if(!musicOn){
        bgm.play().then(() => {
          musicOn = true;
        }).catch(()=>{});
      }

      document.body.innerHTML = `
        <canvas id="confetti"></canvas>
        <div class="success">
          <div class="heart">üíñ</div>
          <h2>IT‚ÄôS OFFICIAL üò≠‚ù§Ô∏è</h2>
          <p class="val">YOU ARE MY VALENTINE üíû</p>
          <p class="love">I LOVE YOU üòå</p>
        </div>
      `;

      // Re-hook confetti after body replace
      const newCanvas = document.getElementById("confetti");
      const newCtx = newCanvas.getContext("2d");
      function setSize(){
        newCanvas.width = window.innerWidth;
        newCanvas.height = window.innerHeight;
      }
      setSize();
      window.addEventListener("resize", setSize);

      function draw(){
        newCtx.clearRect(0,0,newCanvas.width,newCanvas.height);
        confetti.forEach(p => {
          newCtx.save();
          newCtx.translate(p.x, p.y);
          newCtx.rotate(p.rot);
          newCtx.fillStyle = `hsl(${(p.x + p.y) % 360}, 90%, 60%)`;
          newCtx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.7);
          newCtx.restore();
        });
      }

      function animate(){
        confetti.forEach(p => {
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;
          p.vy += 0.02;
          p.life -= 1;
        });
        confetti = confetti.filter(p => p.life > 0 && p.y < newCanvas.height + 60);
        draw();
        if(confetti.length > 0) requestAnimationFrame(animate);
      }
      animate();
    });
  </script>
</body>
</html>